!function(b,a){"function"==typeof define&&define.amd?define([],a(b)):"object"==typeof exports?module.exports=a(b):b.smoothScroll=a(b)}("undefined"!=typeof global?global:this.window||this.global,function(d){"use strict";var m,n,i,j,k={},B=!!d.document.querySelector&&!!d.addEventListener,s={speed:500,easing:"easeInOutCubic",offset:0,updateURL:!0,callbackBefore:function(){},callbackAfter:function(){}},t=function(b,a,c){if("[object Object]"===Object.prototype.toString.call(b))for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&a.call(c,b[f],f,b);else for(var e=0,g=b.length;g>e;e++)a.call(c,b[e],e,b)},o=function(c,f){var e={};return t(c,function(b,a){e[a]=c[a]}),t(f,function(b,a){e[a]=f[a]}),e},C=function(b,a){for(var c=a.charAt(0);b&&b!==d.document;b=b.parentNode)if("."===c){if(b.classList.contains(a.substr(1)))return b}else if("#"===c){if(b.id===a.substr(1))return b}else if("["===c&&b.hasAttribute(a.substr(1,a.length-2)))return b;return!1},D=function(b){return Math.max(b.scrollHeight,b.offsetHeight,b.clientHeight)},E=function(b){for(var a,c=String(b),f=c.length,e=-1,g="",p=c.charCodeAt(0);++e<f;){if(a=c.charCodeAt(e),0===a)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");g+=a>=1&&31>=a||127==a||0===e&&a>=48&&57>=a||1===e&&a>=48&&57>=a&&45===p?"\\"+a.toString(16)+" ":a>=128||45===a||95===a||a>=48&&57>=a||a>=65&&90>=a||a>=97&&122>=a?c.charAt(e):"\\"+c.charAt(e)}return g},F=function(b,a){var c;return"easeInQuad"===b&&(c=a*a),"easeOutQuad"===b&&(c=a*(2-a)),"easeInOutQuad"===b&&(c=.5>a?2*a*a:-1+(4-2*a)*a),"easeInCubic"===b&&(c=a*a*a),"easeOutCubic"===b&&(c=--a*a*a+1),"easeInOutCubic"===b&&(c=.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1),"easeInQuart"===b&&(c=a*a*a*a),"easeOutQuart"===b&&(c=1- --a*a*a*a),"easeInOutQuart"===b&&(c=.5>a?8*a*a*a*a:1-8*--a*a*a*a),"easeInQuint"===b&&(c=a*a*a*a*a),"easeOutQuint"===b&&(c=1+--a*a*a*a*a),"easeInOutQuint"===b&&(c=.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a),c||a},G=function(b,a,c){var f=0;if(b.offsetParent)do f+=b.offsetTop,b=b.offsetParent;while(b);return f=f-a-c,f>=0?f:0},H=function(){return Math.max(d.document.body.scrollHeight,d.document.documentElement.scrollHeight,d.document.body.offsetHeight,d.document.documentElement.offsetHeight,d.document.body.clientHeight,d.document.documentElement.clientHeight)},I=function(b){return b&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(b):{}},J=function(b,a){d.history.pushState&&(a||"true"===a)&&d.history.pushState(null,null,[d.location.protocol,"//",d.location.host,d.location.pathname,d.location.search,b].join(""))},q=function(b){return null===b?0:D(b)+b.offsetTop};k.animateScroll=function(e,g,p){var h=o(h||s,p||{}),K=I(e?e.getAttribute("data-options"):null);h=o(h,K),g="#"+E(g.substr(1));var u="#"===g?d.document.documentElement:d.document.querySelector(g),v=d.pageYOffset;i||(i=d.document.querySelector("[data-scroll-header]")),j||(j=q(i));var w,l,r,x=G(u,j,parseInt(h.offset,10)),L=x-v,M=H(),y=0;J(g,h.updateURL);var N=function(b,a,c){var f=d.pageYOffset;(b==a||f==a||d.innerHeight+f>=M)&&(clearInterval(c),u.focus(),h.callbackAfter(e,g))},O=function(){y+=16,l=y/parseInt(h.speed,10),l=l>1?1:l,r=v+L*F(h.easing,l),d.scrollTo(0,Math.floor(r)),N(r,x,w)},P=function(){h.callbackBefore(e,g),w=setInterval(O,16)};0===d.pageYOffset&&d.scrollTo(0,0),P()};var z=function(b){var a=C(b.target,"[data-scroll]");a&&"a"===a.tagName.toLowerCase()&&(b.preventDefault(),k.animateScroll(a,a.hash,m))},A=function(){n||(n=setTimeout(function(){n=null,j=q(i)},66))};return k.destroy=function(){m&&(d.document.removeEventListener("click",z,!1),d.removeEventListener("resize",A,!1),m=null,n=null,i=null,j=null)},k.init=function(b){B&&(k.destroy(),m=o(s,b||{}),i=d.document.querySelector("[data-scroll-header]"),j=q(i),d.document.addEventListener("click",z,!1),i&&d.addEventListener("resize",A,!1))},k});